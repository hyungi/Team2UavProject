function UAV() {
	
	this.currLocation = map.googlemap.getCenter().toJSON();
	this.heading = 0;

	//그리기
	this.frameIcon1 = {
		path :  "M-16.61146569893046,-12.288496934595074 c3.7698170426189908,2.0240071288049224 8.395298051774502,3.0501653334498404 13.748093432486058,3.0501653334498404 c8.962973623603583,0 16.229731787174938,-2.655538220524788 17.028777192741632,-2.9580005330741406 c0.7686076077520853,-0.2913940224349501 1.2194275781810284,-1.0904394280016423 1.0714956237673758,-1.8990631615519522 c-0.14793195441365273,-0.8088365852832794 -0.8528968940079211,-1.3963073682785034 -1.6749302867352962,-1.3963073682785034 H-15.806034741374702 c-0.7805273047983642,0 -1.4610142951011658,0.5306393702924251 -1.651516596108675,1.2875401327311993 C-17.647627935024957,-13.447261768879855 -17.299189648154226,-12.658007543029754 -16.61146569893046,-12.288496934595074 z"+
                        "M14.163063557234551,16.33346274605158 c-2.903723341166973,-1.0987406455874442 -9.757123439311982,-2.95821338480711 -17.02643582367897,-2.95821338480711 c-5.352369677245617,0 -9.978276389867068,1.0263710563778878 -13.748519135951996,3.0508038886487485 c-0.6875110974907884,0.36908490496873886 -1.0361622360944749,1.1585519825518131 -0.8460856385529046,1.9154527449905874 c0.19050230100750956,0.7569007624387751 0.8709892913103108,1.2875401327311993 1.651516596108675,1.2875401327311993 h29.366940746039152 c0.8222462444603443,0 1.5272111840546128,-0.587683634728194 1.6749302867352962,-1.3965202200114728 C15.383342542347464,17.423476470587303 14.932096868452561,16.6244310650206 14.163063557234551,16.33346274605158 z"+
                        "M54.11554668730214,-6.659420004489377 c0.12749818804860139,-0.26244618675112724 0.1866709698140623,-0.5559687265157705 0.16751431384682688,-0.8531097457408906 c-0.08216076892614389,-1.2798774703443052 -1.1161944876909256,-3.8179215342700483 -2.0271999047994615,-5.435594704836607 c-1.9433363220095634,-3.4505394431650633 -4.5741837415099145,-5.692719598263502 -7.609662305384874,-6.484953748375177 l-0.022349431961774868,-0.005746996790170686 c-0.12834959498047843,-0.033843425542116286 -0.36674353590607645,-0.09706039023399364 -0.6655873689949507,-0.09706039023399364 H22.242063933816695 c-0.7803144530653956,-2.4912166826725013 -2.9045747480988506,-4.2736370945572855 -5.338534314602613,-4.2736370945572855 c-1.5461549882888797,0 -2.804108730137348,1.2017608843445777 -2.804108730137348,2.6785262076854703 V-19.535885590466222 H-29.994731261107177 c-0.17602838316559824,-0.030863501280546247 -0.4963702412843709,-0.050445860713720383 -0.7700975698828691,0.008939772784709959 C-34.24133618557738,-18.766852279248198 -40.81632621699856,-15.447642355325186 -40.81632621699856,-8.326687628837789 v20.238794177651407 c0,6.584568359404802 5.756149414688348,10.323947604209184 9.788625495791434,11.30945112785697 c0.20008062899112714,0.11068290114402768 0.5061614210009571,0.23860679265856738 0.9012142373919485,0.23860679265856738 H14.099420889076725 v1.625335832953453 c0,1.5163557456731795 1.3101024164259434,2.8466790767312053 2.8036830266714103,2.8466790767312053 c2.614883539527655,0 4.770220187574625,-1.8635169221460819 5.440064591228962,-4.472014909684658 h21.615093483030794 c0.4261291694045069,0 0.7554108003079891,-0.14750625094771425 0.971881012737751,-0.2811771392524243 c6.680138787508011,-1.9541917603909968 8.950415371358394,-10.232421359032392 9.192002088278533,-11.189402750462294 c0.09557042810320873,-0.3797274916172032 0.0470402329862118,-0.7132661571800709 -0.006385551989078539,-0.9308006282746798 V-6.659420004489377 zM50.72545713630035,11.503218369779617 c-0.2011448876559737,0.6981536841392517 -0.6992179428040987,2.218766464471817 -1.605966325253248,3.8104717236161236 c-1.4456889703273776,2.5386826191246508 -3.2396033757925036,4.102291449517011 -5.3298073935508725,4.647404737651348 c-0.0989760558307172,0.02575505968928339 -0.18922519060969387,0.057895671367645306 -0.27053455260396003,0.09322905904054662 H20.855973448720732 c-0.936760476797819,0 -1.6977054221630112,0.7569007624387751 -1.7028138637542725,1.6934483875036248 c-0.006811255455017103,1.2730662148892882 -0.7049649395942689,2.3490317250490187 -1.6481109683811666,2.6761848386228086 V21.757350605574885 c0,-0.9403789562582977 -0.7624349074959756,-1.7028138637542725 -1.7028138637542725,-1.7028138637542725 H-29.723771005037293 c-0.09173909690976152,-0.03831331193447126 -0.19646214953064942,-0.07343384787440314 -0.31353060266375565,-0.09918890756368653 C-32.08812805486008,19.50686923289065 -37.41069848949002,17.186998195258425 -37.41069848949002,11.912106548813611 v-20.238794177651407 c0,-4.787674029678106 4.5073482973575585,-7.1554367072284215 7.110950695037842,-7.8114457482397555 c0.05321293324232107,0.004682738125324265 0.11132145634293562,0.007875514119863527 0.17326131063699748,0.007875514119863527 H15.802234752830998 c0.9403789562582977,0 1.7028138637542725,-0.7624349074959756 1.7028138637542725,-1.7028138637542725 v-2.4505620016753675 c0.8556639665365222,0.34375554874539377 1.553391947209835,1.3835362643003464 1.6398097507953646,2.5738031550645832 c0.0647069268226625,0.8903587990105156 0.8056438092887408,1.579572710365057 1.6983439773619176,1.579572710365057 h22.971384725511072 c2.1082964150607584,0.5600129094421864 4.000761172890663,2.237497416973114 5.473908016771078,4.853445215165615 c0.7000693497359749,1.2428412688076498 1.2439055274724962,2.6508554823994643 1.4757010646760462,3.4462824085056782 C50.7286499122949,-7.693879426720102 50.7099189597936,-7.550843062164745 50.7099189597936,-7.403336811217031 v18.667096981406214 C50.7099189597936,11.349539418575802 50.715878808316745,11.429571670172251 50.72545713630035,11.503218369779617 z"+
                        "M12.822310491261021,-9.26131958830591 v22.363480176150798 l10.680899960398675,3.0761332448720933 c1.2164476539194584,-3.4894913102984426 5.202309205502272,-16.86573276528716 0.03256631514430056,-28.42869030711055 L12.822310491261021,-9.26131958830591 z"+
                        "M-13.99700786286877,-8.228562979938943 L-25.44651543101952,-10.681253498944002 c-3.8287769726514815,12.698521537214518 -0.9561299844980244,22.82728410229087 0.013622510910034217,25.679710175812243 L-13.99700786286877,12.321846134779499 V-8.228562979938943 z"+
                        "M44.696644651678355,9.98537266197566 c-1.1653632380068302,0 -2.0782843207120894,1.2287930544316767 -2.0782843207120894,2.79772317814827 c0,1.5680787167847159 0.9129210827052593,2.7964460677504537 2.0782843207120894,2.7964460677504537 c1.1634475724101068,0 2.074878692984581,-1.2283673509657382 2.074878692984581,-2.7964460677504537 C46.77152334466294,11.214378568140319 45.86009222408845,9.98537266197566 44.696644651678355,9.98537266197566 z"+
                        "M44.62086943474128,-6.333118297847477 c1.0697928099036216,0 1.9080029343366625,-1.1296041468679905 1.9080029343366625,-2.5712489342689513 c0,-1.4418576391339304 -0.8382101244330407,-2.571674637734892 -1.9080029343366625,-2.571674637734892 c-1.0714956237673758,0 -1.9109828585982322,1.1298169986009596 -1.9109828585982322,2.571674637734892 C42.70988657614306,-7.462509592982485 43.549160959240936,-6.333118297847477 44.62086943474128,-6.333118297847477 z",
		strokeWeight : 1,
		rotation : 270
        };
	
	
	
	//적용, 설정
	this.frameMarker1 = new google.maps.Marker({
		icon : this.frameIcon1,
		map : map.googlemap,
		position : this.currLocation,
		optimized: false
	});

	

	//회전
	this.drawUav = function() {
		try {
			this.frameIcon1.rotation = 270+this.heading;

			this.frameMarker1.setIcon(this.frameIcon1);

		} catch (err) {
			console.log(">>[uav.drawUav()]" + err);
		}
	};

	this.headingLine = null;
	this.drawHeadingLine = function() {
		try {
			//전의 것 지우기
			if(this.headingLine != null){
				this.headingLine.setMap(null);
			}
			
			//그리기
			var endHeadingLatLng =google.maps.geometry.spherical.computeOffset(
					new google.maps.LatLng(this.currLocation),
					2000,
					this.heading //0~360
			);

			this.headingLine = new google.maps.Polyline({ //라인 그리기
				path : [
					//시작점
					this.currLocation,
					//끝점
					endHeadingLatLng
				],
				strokeColor : "#ff0000",
				strokeWeight : 2,
				map : map.googlemap
			})
		} catch (err) {
			console.log(">>[uav.drawHeading] " + err)
		}
	};
	
	this.gotoMarker = null;
	this.gotoStart = function(location){
		try {
			
			//전의것 지우기
			if(this.gotoMarker != null){
				this.gotoMarker.setMap(null);
			}
			//마크만들기
			this.gotoMarker = new google.maps.Marker({
				position: location,
				map: map.googlemap
			}); 
		} catch (err) {
			console.log(">>[uav.gotoStart()] "+err)
		}
	};
	
	this.destLocation = null;
	this.destLine = null;
	this.drawDestLine = function(){
		if(this.gotoMarker != null){
			this.destLocation = this.gotoMarker.getPosition().toJSON();
		}else{
			this.destLocation = this.currLocation;
		}
		var bearing = google.maps.geometry.spherical.computeHeading(
				new google.maps.LatLng(this.currLocation),
				new google.maps.LatLng(this.destLocation)
			);
		
		// 시계방향: 0~180 반시계 방향: 0~ -180
		if(bearing < 0){
			bearing += 360;
		}
		var endBearingLatLng = google.maps.geometry.spherical.computeOffset(
				new google.maps.LatLng(this.currLocation),
				2000,
				bearing//0~360
			);
		
		if(this.destLine != null){
			this.destLine.setMap(null);
		}
		
		this.destLine = new google.maps.Polyline({ //라인 그리기
			path : [
				//시작점
				this.currLocation,
				//끝점
				endBearingLatLng
			],
			strokeColor : "#ff9900",
			strokeWeight : 2,
			map : map.googlemap,
			optimized: false
		})
		
		console.log(bearing);

	};
	
	//미션 만들기의 마크 그리기
	this.missionMarkers = [];
	this.makeMissionMarker = function(kind, lat, lng){
		try {
			var marker = null;
			if(kind == "waypoint"){
				marker= new google.maps.Marker({
					map: map.googlemap,
					position: {lat:lat, lng,lng},
					icon: {
						path: google.maps.SymbolPath.CIRCLE,
						fillColor: "#ffffff",
						fillOpacity: 1,
						strokeColor: "#0000ff",
						strokeWeight: 1,	
						scale: 12,
						optimized: false
					},
					draggable:true
				});
				marker.kind = kind;
				//드래그 이벤트처리
				var self = this;
				marker.addListener('drag', function(){
					self.drawMissionPath();
				});
				this.missionMarkers.push(marker);
			}
			for(var i=0;i<this.missionMarkers.length;i++){
				this.missionMarkers[i].index = i;
				this.missionMarkers[i].setLabel({
					color: "#000000",
					fontSize: "12px",
					fontWeight: "600",
					text: String(i+1),
					optimized: false
				});
			}
			
			this.drawMissionPath();
			
		} catch (err) {
			console.log(">>[uav.makeMissionMarker] "+err)
		}
	};
	
	this.missionPolylines = [];
	this.drawMissionPath = function(){
		try {
			//Polyline을 지도에서 제거
			for(var i=0;i<this.missionPolylines.length;i++){
				this.missionPolylines[i].setMap(null);
			}
			this.missionPolylines = [];
			
			//시작점
			var prevMarker = this.missionMarkers[0];
			//끝점
			var nextMarker = null;
			for(var i=1;i<this.missionMarkers.length;i++){
				//선을 생성
				var polyline = new google.maps.Polyline({
					strokeColor: "#1EA4FF",
					strokeWeight: 3,
					map: map.googlemap,
				});
				//선 그리기
				nextMarker = this.missionMarkers[i];
				polyline.setPath([ prevMarker.getPosition(), nextMarker.getPosition() ]);
				//배열에 저정
				this.missionPolylines.push(polyline);
				//이전 마크 변경
				prevMarker = nextMarker;
				
			}
			
		} catch (err) {
			console.log(">>[uav.drawMissionPath] "+err);
		}
	};
	

}


